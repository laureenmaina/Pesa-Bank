{"ast":null,"code":"var _jsxFileName = \"/home/laurine/development/phase4/Pesa-Bank/Frontend/src/components/Subscriptions.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Subscriptions() {\n  _s();\n  const [subscriptions, setSubscriptions] = useState([]);\n  const [newSubscription, setNewSubscription] = useState({\n    user_id: '',\n    service_provider: '',\n    amount: '',\n    plan: '',\n    start_date: '',\n    end_date: ''\n  });\n  const [error, setError] = useState(null);\n  const fetchSubscriptions = async () => {\n    try {\n      const response = await fetch('http://localhost:5000/subscriptions');\n      if (!response.ok) {\n        throw new Error('Network response was not ok');\n      }\n      const data = await response.json();\n      setSubscriptions(data);\n    } catch (error) {\n      setError(error.message);\n    }\n  };\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setNewSubscription(prevSubscription => ({\n      ...prevSubscription,\n      [name]: value\n    }));\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    try {\n      const response = await fetch('http://localhost:5000/subscriptions', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(newSubscription)\n      });\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.message || 'Failed to create subscription');\n      }\n      setNewSubscription({\n        user_id: '',\n        service_provider: '',\n        amount: '',\n        plan: '',\n        start_date: '',\n        end_date: ''\n      });\n      fetchSubscriptions();\n    } catch (error) {\n      setError(error.message);\n    }\n  };\n  const handleDelete = async id => {\n    try {\n      const response = await fetch(`http://localhost:5000/subscriptions/${id}`, {\n        method: 'DELETE',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.message || 'Failed to delete subscription');\n      }\n      fetchSubscriptions();\n    } catch (error) {\n      setError(error.message);\n    }\n  };\n  useEffect(() => {\n    fetchSubscriptions();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"My Subscriptions\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: fetchSubscriptions,\n      children: \"Fetch Subscriptions\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: subscriptions.map(subscription => /*#__PURE__*/_jsxDEV(\"li\", {\n        children: [subscription.service_provider, \" - \", subscription.amount, \" - \", subscription.plan, \" - \", subscription.start_date, \" - \", subscription.end_date, /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleDelete(subscription.id),\n          children: \"Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 13\n        }, this)]\n      }, subscription.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Add a New Subscription\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        name: \"user_id\",\n        value: newSubscription.user_id,\n        onChange: handleChange,\n        placeholder: \"User ID\",\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"service_provider\",\n        value: newSubscription.service_provider,\n        onChange: handleChange,\n        placeholder: \"Service Provider\",\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        name: \"amount\",\n        value: newSubscription.amount,\n        onChange: handleChange,\n        placeholder: \"Amount\",\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"plan\",\n        value: newSubscription.plan,\n        onChange: handleChange,\n        placeholder: \"Plan\",\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"date\",\n        name: \"start_date\",\n        value: newSubscription.start_date,\n        onChange: handleChange,\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"date\",\n        name: \"end_date\",\n        value: newSubscription.end_date,\n        onChange: handleChange,\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"Add Subscription\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 87,\n    columnNumber: 5\n  }, this);\n}\n_s(Subscriptions, \"ym1AmalxvaZX0mbmDG4Mnz2+RF8=\");\n_c = Subscriptions;\nexport default Subscriptions;\nvar _c;\n$RefreshReg$(_c, \"Subscriptions\");","map":{"version":3,"names":["React","useState","useEffect","jsxDEV","_jsxDEV","Subscriptions","_s","subscriptions","setSubscriptions","newSubscription","setNewSubscription","user_id","service_provider","amount","plan","start_date","end_date","error","setError","fetchSubscriptions","response","fetch","ok","Error","data","json","message","handleChange","e","name","value","target","prevSubscription","handleSubmit","preventDefault","method","headers","body","JSON","stringify","errorData","handleDelete","id","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","map","subscription","onSubmit","type","onChange","placeholder","required","_c","$RefreshReg$"],"sources":["/home/laurine/development/phase4/Pesa-Bank/Frontend/src/components/Subscriptions.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\n\nfunction Subscriptions() {\n  const [subscriptions, setSubscriptions] = useState([]);\n  const [newSubscription, setNewSubscription] = useState({\n    user_id: '',\n    service_provider: '',\n    amount: '',\n    plan: '',\n    start_date: '',\n    end_date: ''\n  });\n  const [error, setError] = useState(null);\n\n  const fetchSubscriptions = async () => {\n    try {\n      const response = await fetch('http://localhost:5000/subscriptions');\n      if (!response.ok) {\n        throw new Error('Network response was not ok');\n      }\n      const data = await response.json();\n      setSubscriptions(data);\n    } catch (error) {\n      setError(error.message);\n    }\n  };\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setNewSubscription((prevSubscription) => ({\n      ...prevSubscription,\n      [name]: value\n    }));\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    try {\n      const response = await fetch('http://localhost:5000/subscriptions', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(newSubscription)\n      });\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.message || 'Failed to create subscription');\n      }\n      setNewSubscription({\n        user_id: '',\n        service_provider: '',\n        amount: '',\n        plan: '',\n        start_date: '',\n        end_date: ''\n      });\n      fetchSubscriptions(); \n    } catch (error) {\n      setError(error.message);\n    }\n  };\n\n  const handleDelete = async (id) => {\n    try {\n      const response = await fetch(`http://localhost:5000/subscriptions/${id}`, {\n        method: 'DELETE',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.message || 'Failed to delete subscription');\n      }\n      fetchSubscriptions();\n    } catch (error) {\n      setError(error.message);\n    }\n  };\n\n  useEffect(() => {\n    fetchSubscriptions();\n  }, []);\n\n  return (\n    <div>\n      <h1>My Subscriptions</h1>\n      <button onClick={fetchSubscriptions}>Fetch Subscriptions</button>\n      {error && <p>{error}</p>}\n      <ul>\n        {subscriptions.map((subscription) => (\n          <li key={subscription.id}>\n            {subscription.service_provider} - {subscription.amount} - {subscription.plan} - {subscription.start_date} - {subscription.end_date}\n            <button onClick={() => handleDelete(subscription.id)}>Delete</button>\n          </li>\n        ))}\n      </ul>\n      <h2>Add a New Subscription</h2>\n      <form onSubmit={handleSubmit}>\n        <input\n          type=\"number\"\n          name=\"user_id\"\n          value={newSubscription.user_id}\n          onChange={handleChange}\n          placeholder=\"User ID\"\n          required\n        />\n        <input\n          type=\"text\"\n          name=\"service_provider\"\n          value={newSubscription.service_provider}\n          onChange={handleChange}\n          placeholder=\"Service Provider\"\n          required\n        />\n        <input\n          type=\"number\"\n          name=\"amount\"\n          value={newSubscription.amount}\n          onChange={handleChange}\n          placeholder=\"Amount\"\n          required\n        />\n        <input\n          type=\"text\"\n          name=\"plan\"\n          value={newSubscription.plan}\n          onChange={handleChange}\n          placeholder=\"Plan\"\n          required\n        />\n        <input\n          type=\"date\"\n          name=\"start_date\"\n          value={newSubscription.start_date}\n          onChange={handleChange}\n          required\n        />\n        <input\n          type=\"date\"\n          name=\"end_date\"\n          value={newSubscription.end_date}\n          onChange={handleChange}\n          required\n        />\n        <button type=\"submit\">Add Subscription</button>\n      </form>\n    </div>\n  );\n}\n\nexport default Subscriptions;\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}